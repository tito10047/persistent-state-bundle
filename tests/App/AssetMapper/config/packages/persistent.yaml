services:
    app.users_resolver:
        class: Tito10047\PersistentStateBundle\Resolver\ObjectContextResolver
        arguments:
            $class: Tito10047\PersistentStateBundle\Tests\App\AssetMapper\Src\Entity\User
            $prefix: 'user_'
    app.companies_resolver:
        class: Tito10047\PersistentStateBundle\Resolver\ObjectContextResolver
        arguments:
            $class: Tito10047\PersistentStateBundle\Tests\App\AssetMapper\Src\Entity\Company
            $prefix: 'company_'
            $identifierMethod: 'getUuid'
    app.storage.doctrine:
        class: Tito10047\PersistentStateBundle\Storage\DoctrinePreferenceStorage
        arguments:
            - '@doctrine.orm.entity_manager'
            - Tito10047\PersistentStateBundle\Tests\App\AssetMapper\Src\Entity\UserPreference
    app.transformer.id:
        class: Tito10047\PersistentStateBundle\Transformer\ObjectIdValueTransformer
        arguments:
            $class: Tito10047\PersistentStateBundle\Tests\App\AssetMapper\Src\Entity\User
            $identifierMethod: 'getId'

persistent_state:
    preference:
        managers:
            default:
                storage: '@persistent_state.preference.storage.session'
            my_pref_manager:
                storage: '@app.storage.doctrine'

    selection:
        managers:
            default:
                storage: '@persistent_state.selection.storage.session'
                transformer: '@app.transformer.id'
                metadata_transformer: '@app.transformer.id'
                ttl: 3600
            scalar:
                transformer: '@persistent_state.transformer.scalar'
                metadata_transformer: '@app.transformer.id'
            array:
                transformer: '@persistent_state.transformer.scalar'
                metadata_transformer: '@app.transformer.id'