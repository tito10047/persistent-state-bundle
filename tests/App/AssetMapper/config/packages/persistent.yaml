services:
    app.users_resolver:
        class: Tito10047\PersistentPreferenceBundle\Resolver\ObjectContextResolver
        arguments:
            $class: Tito10047\PersistentPreferenceBundle\Tests\App\AssetMapper\Src\Entity\User
            $prefix: 'user_'
    app.companies_resolver:
        class: Tito10047\PersistentPreferenceBundle\Resolver\ObjectContextResolver
        arguments:
            $class: Tito10047\PersistentPreferenceBundle\Tests\App\AssetMapper\Src\Entity\Company
            $prefix: 'company_'
            $identifierMethod: 'getUuid'
    app.storage.doctrine:
        class: Tito10047\PersistentPreferenceBundle\Storage\DoctrinePreferenceStorage
        arguments:
            - '@doctrine.orm.entity_manager'
            - Tito10047\PersistentPreferenceBundle\Tests\App\AssetMapper\Src\Entity\UserPreference
    app.transformer.id:
        class: Tito10047\PersistentPreferenceBundle\Transformer\ObjectIdValueTransformer
        arguments:
            $class: Tito10047\PersistentPreferenceBundle\Tests\App\AssetMapper\Src\Entity\User
            $identifierMethod: 'getId'

persistent:
    preference:
        managers:
            default:
                storage: '@persistent.preference.storage.session'
            my_pref_manager:
                storage: '@app.storage.doctrine'
    selection:
        managers:
            default:
                storage: '@persistent.selection.storage.session'
                resolver: '@app.transformer.id'
            simple:
                storage: '@persistent.selection.storage.doctrine'
                resolver: '@app.transformer.id'
